#ifndef ICON_H 
#define ICON_H

#include <Arduino.h>
#include <GxEPD2_3C.h> 
#include "epaper.hpp"

// ====================
// 1. 圖片數據 (Data)
// ====================

// 為了避免多個檔案引用時發生 "multiple definition" 錯誤，在陣列前加上 static
const unsigned char gImage_satellite_icon[60] = { /* 0X00,0X01,0X14,0X00,0X14,0X00, */
0X00,0X00,0X00,0X30,0X00,0X00,0X78,0X00,0X00,0X7C,0X00,0X00,0X3E,0X00,0X00,0X1F,
0X00,0X00,0X0F,0X80,0X00,0X07,0XA0,0X00,0X03,0X70,0X00,0X00,0XF8,0X00,0X03,0XF0,
0X00,0X03,0XEC,0X00,0X03,0XDE,0X00,0X00,0XDF,0X00,0X88,0X0F,0X80,0X14,0X07,0XC0,
0X4C,0X03,0XE0,0X20,0X01,0XE0,0X18,0X00,0XC0,0X04,0X00,0X00,};

const unsigned char gImage_ban_icon[60] = { /* 0X00,0X01,0X14,0X00,0X14,0X00, */
0X03,0XFC,0X00,0X0F,0XFF,0X00,0X1E,0X07,0X80,0X38,0X01,0XC0,0X70,0X03,0XE0,0X60,
0X07,0X60,0XE0,0X0E,0X70,0XC0,0X1C,0X30,0XC0,0X38,0X30,0XC0,0X70,0X30,0XC0,0XE0,
0X30,0XC1,0XC0,0X30,0XC3,0X80,0X30,0XE7,0X00,0X70,0X6E,0X00,0X60,0X7C,0X00,0XE0,
0X38,0X01,0XC0,0X1E,0X07,0X80,0X0F,0XFF,0X00,0X03,0XFC,0X00,};

const unsigned char gImage_gps_icon[60] = { /* 0X10,0X01,0X00,0X14,0X00,0X14, */
0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X01,0XF8,0X00,0X03,0XFC,0X00,0X07,
0X9E,0X00,0X07,0X0E,0X00,0X06,0X06,0X00,0X06,0X07,0X00,0X06,0X06,0X00,0X07,0X0E,
0X00,0X07,0XFE,0X00,0X03,0XFC,0X00,0X01,0XF8,0X00,0X01,0XF8,0X00,0X00,0XF0,0X00,
0X00,0X60,0X00,0X00,0X60,0X00,0X00,0X00,0X00,0X00,0X00,0X00,};

const unsigned char gImage_no_location[60] = { /* 0X10,0X01,0X00,0X14,0X00,0X14, */
0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X80,0X01,0XF1,0X80,0X03,0XE3,0X00,0X07,
0X86,0X00,0X0F,0X0F,0X00,0X0E,0X1F,0X00,0X0E,0X37,0X00,0X0C,0X67,0X00,0X08,0XCF,
0X00,0X01,0XFF,0X00,0X03,0XFE,0X00,0X07,0XFC,0X00,0X0F,0XFC,0X00,0X19,0XF8,0X00,
0X30,0XF0,0X00,0X00,0X70,0X00,0X00,0X00,0X00,0X00,0X00,0X00,};

// devices and directions arrow icons
const unsigned char gImage_arrow_E[42] = { /* 0X00,0X01,0X0A,0X00,0X15,0X00, */
0X00,0X00,0X20,0X00,0X60,0X00,0X70,0X00,0X78,0X00,0X6C,0X00,0X6C,0X00,0X66,0X00,
0X63,0X00,0X61,0X80,0X61,0X80,0X63,0X00,0X66,0X00,0X6C,0X00,0X6C,0X00,0X78,0X00,
0X70,0X00,0X60,0X00,0X00,0X00,0X00,0X00,0X00,0X00,};

const unsigned char gImage_arrow_N[36] = { /* 0X00,0X01,0X15,0X00,0X0C,0X00, */
0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X60,0X00,0X00,0XF0,0X00,0X01,
0X98,0X00,0X07,0X0E,0X00,0X0E,0X07,0X00,0X18,0X01,0X80,0X3F,0XFF,0XE0,0X3F,0XFF,
0XC0,0X00,0X00,0X00,};

const unsigned char gImage_arrow_W[42] = { /* 0X00,0X01,0X0C,0X00,0X15,0X00, */
0X00,0X00,0X00,0X00,0X00,0X40,0X00,0X60,0X00,0XE0,0X01,0XE0,0X03,0X60,0X03,0X60,
0X06,0X60,0X0C,0X60,0X18,0X60,0X18,0X60,0X0C,0X60,0X06,0X60,0X03,0X60,0X03,0X60,
0X01,0XE0,0X00,0XE0,0X00,0X60,0X00,0X40,0X00,0X00,};

const unsigned char gImage_arrow_S[36] = { /* 0X00,0X01,0X15,0X00,0X0C,0X00, */
0X00,0X00,0X00,0X1F,0XFF,0XE0,0X1F,0XFF,0XE0,0X0C,0X00,0XC0,0X07,0X03,0X80,0X03,
0X87,0X00,0X00,0XCC,0X00,0X00,0X78,0X00,0X00,0X30,0X00,0X00,0X00,0X00,0X00,0X00,
0X00,0X00,0X00,0X00,};

const unsigned char gImage_arrow_NE[54] = { /* 0X00,0X01,0X12,0X00,0X12,0X00, */
0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X7E,0X00,0X00,0X3F,0XF8,0X00,0X18,
0X18,0X00,0X0C,0X08,0X00,0X06,0X08,0X00,0X03,0X08,0X00,0X01,0X88,0X00,0X00,0XCC,
0X00,0X00,0X6C,0X00,0X00,0X3C,0X00,0X00,0X1C,0X00,0X00,0X0C,0X00,0X00,0X04,0X00,
0X00,0X00,0X00,0X00,0X00,0X00,};

const unsigned char gImage_arrow_NW[32] = { /* 0X00,0X01,0X10,0X00,0X10,0X00, */
0X00,0X00,0X00,0X00,0X00,0X7E,0X1F,0XFC,0X18,0X18,0X10,0X30,0X10,0X60,0X10,0XC0,
0X11,0X80,0X33,0X00,0X36,0X00,0X3C,0X00,0X38,0X00,0X30,0X00,0X20,0X00,0X00,0X00,
};

const unsigned char gImage_arrow_SW[32] = { /* 0X00,0X01,0X10,0X00,0X10,0X00, */
0X00,0X00,0X20,0X00,0X30,0X00,0X38,0X00,0X3C,0X00,0X36,0X00,0X33,0X00,0X11,0X80,
0X10,0XC0,0X10,0X60,0X10,0X30,0X18,0X18,0X1F,0XFC,0X00,0XFE,0X00,0X00,0X00,0X00,
};

const unsigned char gImage_arrow_SE[32] = { /* 0X00,0X01,0X10,0X00,0X10,0X00, */
0X00,0X00,0X00,0X04,0X00,0X0C,0X00,0X1C,0X00,0X3C,0X00,0X6C,0X00,0XCC,0X01,0X88,
0X03,0X08,0X06,0X08,0X0C,0X08,0X18,0X18,0X3F,0XF8,0X7E,0X00,0X00,0X00,0X00,0X00,
};

const unsigned char gImage_person1[60] = { /* 0X00,0X01,0X14,0X00,0X14,0X00, */
0X00,0X00,0X00,0X00,0XF0,0X00,0X03,0X0E,0X00,0X0C,0X03,0X00,0X18,0X60,0X80,0X31,
0XF0,0XC0,0X23,0XF0,0X40,0X27,0XF0,0X20,0X46,0X70,0X20,0X40,0X60,0X20,0X40,0X60,
0X20,0X40,0X60,0X20,0X20,0X60,0X20,0X20,0X60,0X40,0X33,0XF8,0X40,0X13,0XFC,0X80,
0X0F,0XFB,0X00,0X06,0X06,0X00,0X01,0XF8,0X00,0X00,0X00,0X00,};

const unsigned char gImage_person2[60] = { /* 0X00,0X01,0X14,0X00,0X14,0X00, */
0X00,0X00,0X00,0X00,0XF0,0X00,0X03,0X0E,0X00,0X0C,0X03,0X00,0X18,0X60,0X80,0X31,
0XF0,0XC0,0X21,0XF8,0X40,0X23,0X18,0X20,0X40,0X18,0X20,0X40,0X18,0X20,0X40,0X38,
0X20,0X40,0X70,0X20,0X21,0XE0,0X20,0X23,0XFC,0X40,0X33,0XFE,0X40,0X10,0XF0,0X80,
0X0C,0X01,0X00,0X06,0X06,0X00,0X01,0XF8,0X00,0X00,0X00,0X00,};

const unsigned char gImage_person3[60] = { /* 0X00,0X01,0X14,0X00,0X14,0X00, */
0X00,0X00,0X00,0X00,0XF0,0X00,0X03,0X0E,0X00,0X0C,0X03,0X00,0X18,0XF0,0X80,0X30,
0XF8,0XC0,0X20,0XFC,0X40,0X20,0X1C,0X20,0X40,0X7C,0X20,0X40,0XFC,0X20,0X40,0XFC,
0X20,0X40,0X3C,0X20,0X20,0X0C,0X20,0X20,0X7C,0X40,0X31,0XF8,0X40,0X11,0XF0,0X80,
0X0C,0XE1,0X00,0X06,0X06,0X00,0X01,0XF8,0X00,0X00,0X00,0X00,};

const unsigned char gImage_person_me[60] = { /* 0X00,0X01,0X14,0X00,0X14,0X00, */
0X00,0X00,0X00,0X00,0XF8,0X00,0X07,0X06,0X00,0X0C,0X03,0X00,0X18,0XF1,0X80,0X33,
0XFC,0XC0,0X23,0XFC,0X40,0X27,0X0E,0X60,0X67,0X0E,0X20,0X47,0X0E,0X20,0X43,0X9C,
0X20,0X63,0XFC,0X20,0X61,0XF8,0X60,0X21,0XF8,0X40,0X30,0XF0,0XC0,0X18,0X60,0X80,
0X0C,0X03,0X80,0X07,0X06,0X00,0X01,0XF8,0X00,0X00,0X00,0X00,};



// ====================
// 2. 函式型別和列舉 (TypeDef and Enum)
// ====================

// use short names to refer to images c arrarys
// 定義圖示的代號 
enum IconType {
	// single icons
	ICON_GPS,
	ICON_BAN,
	ICON_ARROW_N,
	ICON_ARROW_E,
	ICON_ARROW_S,
	ICON_ARROW_W,
	ICON_ARROW_NE,
	ICON_ARROW_NW,
	ICON_ARROW_SW,
	ICON_ARROW_SE,
	ICON_PERSON1,
	ICON_PERSON2,
	ICON_PERSON3,
	ICON_PERSON_ME,
	// composite icon with overlay
	ICON_NO_LOCATION  // 這個有特殊疊加邏輯
};
// 定義結構 (包含寬高與疊加層資訊)
struct IconDef {
	const unsigned char* data;
	int width;
	int height;
	
	// 疊加層 (若無則填 NULL)
	const unsigned char* overlayData; 
	uint16_t overlayColor;
};
// 建立資料庫 (順序必須嚴格對應上面的 Enum )
const IconDef iconTable[] = {
	// [0] ICON_GPS
	{gImage_gps_icon,     20,  20,   NULL,             0},
	
	// [1] ICON_BAN
	{gImage_ban_icon,     20,  20,   NULL,             0},

	// [2] ICON_ARROW_N
	{gImage_arrow_N,      21,  12,   NULL,             0},
	// [3] ICON_ARROW_E
	{gImage_arrow_E,      10,  21,   NULL,			   0},
	// [4] ICON_ARROW_S
	{gImage_arrow_S,      21,  12,   NULL,			   0},
	// [5] ICON_ARROW_W
	{gImage_arrow_W,      12,  21,   NULL,			   0},

	// [6] ICON_ARROW_NE
	{gImage_arrow_NE,     18,  18,   NULL,             0},
	// [7] ICON_ARROW_NW
	{gImage_arrow_NW,     16,  16,   NULL,             0},
	// [8] ICON_ARROW_SW
	{gImage_arrow_SW,     16,  16,   NULL,			   0},
	// [9] ICON_ARROW_SE
	{gImage_arrow_SE,     16,  16,   NULL,			   0},

	// [10] ICON_PERSON1
	{gImage_person1,      20,  20,   NULL,			   0},
	// [11] ICON_PERSON2
	{gImage_person2,      20,  20,   NULL,			   0},
	// [12] ICON_PERSON3
	{gImage_person3,      20,  20,   NULL,			   0},
	// [13] ICON_PERSON_ME
	{gImage_person_me,    20,  20,   NULL,			   0},
	
	// [14] ICON_NO_LOCATION (主圖+疊加圖)
	{gImage_no_location,  20,  20,   gImage_ban_icon,  GxEPD_RED} 
};

// ====================
// 4. 函式宣告
// ====================
// 移除 display 參數，只剩下邏輯參數
void drawIcon(IconType type, int x, int y, uint16_t color);


#endif // [防止重複引用] 結尾